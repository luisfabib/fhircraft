
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mydomain.org/docs/user-guide/fhir-resources/">
      
      
        <link rel="prev" href="../../installation/">
      
      
        <link rel="next" href="../fhirpath/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Pydantic FHIR models - Fhircraft</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#constructing-fhir-pydantic-models" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Fhircraft" class="md-header__button md-logo" aria-label="Fhircraft" data-md-component="logo">
      
  <img src="../../assets/logo_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fhircraft
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Pydantic FHIR models
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/luisfabib/fhircraft" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    luisfabib/fhircraft
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Fhircraft" class="md-nav__button md-logo" aria-label="Fhircraft" data-md-component="logo">
      
  <img src="../../assets/logo_white.svg" alt="logo">

    </a>
    Fhircraft
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/luisfabib/fhircraft" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    luisfabib/fhircraft
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Pydantic FHIR models
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Pydantic FHIR models
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#constructing-fhir-pydantic-models" class="md-nav__link">
    <span class="md-ellipsis">
      Constructing FHIR Pydantic models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constructing FHIR Pydantic models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#via-local-files-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Via local files (recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#via-canonical-url" class="md-nav__link">
    <span class="md-ellipsis">
      Via canonical URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cached-models" class="md-nav__link">
    <span class="md-ellipsis">
      Cached models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pydantic-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Pydantic representation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pydantic representation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Data types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primitive-types" class="md-nav__link">
    <span class="md-ellipsis">
      Primitive Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-types" class="md-nav__link">
    <span class="md-ellipsis">
      Complex Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fhir-resources" class="md-nav__link">
    <span class="md-ellipsis">
      FHIR resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fhir-elements" class="md-nav__link">
    <span class="md-ellipsis">
      FHIR elements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FHIR elements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cardinality" class="md-nav__link">
    <span class="md-ellipsis">
      Cardinality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backbone-elements" class="md-nav__link">
    <span class="md-ellipsis">
      Backbone elements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slicing" class="md-nav__link">
    <span class="md-ellipsis">
      Slicing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-choice-elements" class="md-nav__link">
    <span class="md-ellipsis">
      Type-choice elements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primitive-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Primitive extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invariant-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Invariant constraints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixed-values-pattern-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Fixed values &amp; Pattern constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fhirpath/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FHIRPath
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Fhircraft
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Fhircraft
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2" id="__nav_5_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Fhir
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2">
            <span class="md-nav__icon md-icon"></span>
            Fhir
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2_1" id="__nav_5_1_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Path
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2_1">
            <span class="md-nav__icon md-icon"></span>
            Path
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/lexer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lexer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/parser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2_1_4" id="__nav_5_1_2_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Engine
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_1_2_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            Engine
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/additional/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/boolean/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boolean
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/collection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/combining/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Combining
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comparison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/conversion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/equality/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Equality
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/existence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Existence
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/filtering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filtering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/literals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Literals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/math/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Math
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/navigation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Navigation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/strings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Strings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/subsetting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Subsetting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/path/engine/utility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utility
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2_2" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2_2" id="__nav_5_1_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Resources
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2_2">
            <span class="md-nav__icon md-icon"></span>
            Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/factory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Factory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2_2_5" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2_2_5" id="__nav_5_1_2_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Datatypes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_1_2_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2_2_5">
            <span class="md-nav__icon md-icon"></span>
            Datatypes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/datatypes/primitives/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Primitives
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2_2_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2_2_5_2" id="__nav_5_1_2_2_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    R4
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_5_1_2_2_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2_2_5_2">
            <span class="md-nav__icon md-icon"></span>
            R4
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/datatypes/R4/complex_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Complex types
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2_2_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2_2_5_3" id="__nav_5_1_2_2_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    R4B
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_5_1_2_2_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2_2_5_3">
            <span class="md-nav__icon md-icon"></span>
            R4B
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/datatypes/R4B/complex_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Complex types
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2_2_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2_2_5_4" id="__nav_5_1_2_2_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    R5
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_5_1_2_2_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2_2_5_4">
            <span class="md-nav__icon md-icon"></span>
            R5
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/datatypes/R5/complex_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Complex types
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2_2_6" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2_2_6" id="__nav_5_1_2_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Definitions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_1_2_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2_2_6">
            <span class="md-nav__icon md-icon"></span>
            Definitions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/fhircraft/fhir/resources/definitions/generate_datatypes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate datatypes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#constructing-fhir-pydantic-models" class="md-nav__link">
    <span class="md-ellipsis">
      Constructing FHIR Pydantic models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constructing FHIR Pydantic models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#via-local-files-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Via local files (recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#via-canonical-url" class="md-nav__link">
    <span class="md-ellipsis">
      Via canonical URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cached-models" class="md-nav__link">
    <span class="md-ellipsis">
      Cached models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pydantic-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Pydantic representation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pydantic representation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Data types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primitive-types" class="md-nav__link">
    <span class="md-ellipsis">
      Primitive Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-types" class="md-nav__link">
    <span class="md-ellipsis">
      Complex Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fhir-resources" class="md-nav__link">
    <span class="md-ellipsis">
      FHIR resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fhir-elements" class="md-nav__link">
    <span class="md-ellipsis">
      FHIR elements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FHIR elements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cardinality" class="md-nav__link">
    <span class="md-ellipsis">
      Cardinality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backbone-elements" class="md-nav__link">
    <span class="md-ellipsis">
      Backbone elements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slicing" class="md-nav__link">
    <span class="md-ellipsis">
      Slicing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-choice-elements" class="md-nav__link">
    <span class="md-ellipsis">
      Type-choice elements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primitive-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Primitive extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invariant-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Invariant constraints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixed-values-pattern-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Fixed values &amp; Pattern constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Pydantic FHIR models</h1>

<h2 id="constructing-fhir-pydantic-models">Constructing FHIR Pydantic models</h2>
<p>To generate a Pydantic model representation for a FHIR resource, use the <code>construct_resource_model</code> function. This function automatically creates a model based on the structure definition of the specified resource or profile.</p>
<div class="admonition important">
<p class="admonition-title">Snapshot required</p>
<p>Fhircraft requires the resource's structure definition to be in <code>snapshot</code> form. Models cannot be constructed from definitions that only include a <code>differential</code>. If the <code>snapshot</code> attribute is missing, Fhircraft will raise an error.</p>
</div>
<div class="admonition important">
<p class="admonition-title">FHIR versions</p>
<p>Fhircraft automatically handles differences between official FHIR releases. It uses the appropriate complex types based on the FHIR version specified in the resource's structure definition, ensuring that the constructed model conforms to the correct release.</p>
</div>
<h4 id="via-local-files-recommended">Via local files (recommended)</h4>
<p>For optimal control and security, it is recommended to manage FHIR structure definitions as local files. These files should be loaded into Python and parsed into dictionary objects.</p>
<div class="admonition note">
<p class="admonition-title">Loading utilities</p>
<p>Fhircraft provides utility functions to load JSON or YAML files (XML currently not supported) into Python dictionaries. </p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>    <span class="kn">from</span> <span class="nn">fhircraft.utils</span> <span class="kn">import</span> <span class="n">load_file</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">structure_definition</span> <span class="o">=</span> <span class="n">load_file</span><span class="p">(</span><span class="s1">&#39;fhir/patient_r4b_structuredefinition.json&#39;</span><span class="p">)</span> 
</span></code></pre></div>
</div>
<p>The <code>construct_resource_model</code> function takes this dictionary containing the FHIR structure definition and constructs the corresponding model.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.resources.factory</span> <span class="kn">import</span> <span class="n">construct_resource_model</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">resource_model</span> <span class="o">=</span> <span class="n">construct_resource_model</span><span class="p">(</span><span class="n">structure_definition</span><span class="o">=</span><span class="n">structure_definition</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="via-canonical-url">Via canonical URL</h4>
<p>A canonical URL is a globally unique identifier for FHIR conformance resources. Fhircraft includes a limited canonical URL resolver that can locate and download a FHIR resource's structure definition via HTTP.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.resources.factory</span> <span class="kn">import</span> <span class="n">construct_resource_model</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">resource_model</span> <span class="o">=</span> <span class="n">construct_resource_model</span><span class="p">(</span><span class="n">canonical_url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Release version</p>
<p>Most canonical URLs will resolve to the latest normative release of the FHIR resource.</p>
</div>
<h4 id="cached-models">Cached models</h4>
<p>Fhircraft caches the model created based on the structure definition of FHIR resource. Subsequent calls to <code>construct_resource_model</code> will not trigger any model constructer and will instead return the cached model. 
The cache can be reset by simply calling:
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.resources.factory</span> <span class="kn">import</span> <span class="n">clear_cache</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">clear_cache</span><span class="p">()</span>
</span></code></pre></div></p>
<h2 id="pydantic-representation">Pydantic representation</h2>
<h3 id="data-types">Data types</h3>
<p>Fhircraft introduces a set of data types that align with the FHIR data type classification. These types serve as foundational elements for constructing Pydantic models that accurately reflect FHIR specifications. While rooted in primitive Python types, these Fhircraft data types maintain the FHIR flavor, ensuring that models are both Pythonic and compatible with other Pydantic models. The classification of data types into primitive and complex categories mirrors FHIRâ€™s own structure, representing the fundamental components used to define FHIR resources.</p>
<h4 id="primitive-types">Primitive Types</h4>
<p>Primitive types are the most fundamental data types in FHIR, representing simple values that cannot be subdivided further. In Fhircraft, all <a href="https://hl7.org/fhir/datatypes.html#primitive">FHIR primitive types</a> are represented as parametrized type aliases (<code>TypeAliasType</code>) in Python. This representation is consistent across all FHIR releases. </p>
<p>All primitive types can be handled as strings and are parsed using appropriate regular expressions to ensure accurate formatting and conversion to more Pythonic types. This approach ensures that data adheres to FHIR specifications while remaining integrated with Python's type system.</p>
<table>
<thead>
<tr>
<th>FHIR Primitive</th>
<th>Fhircraft Primitive</th>
<th>Python types</th>
<th>Regex</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean</td>
<td><code>Boolean</code></td>
<td><code>bool</code>, <code>str</code></td>
<td><code>true|false</code></td>
</tr>
<tr>
<td>integer</td>
<td><code>Integer</code></td>
<td><code>int</code>, <code>str</code></td>
<td><code>[0]|[-+]?[1-9][0-9]*</code></td>
</tr>
<tr>
<td>integer64</td>
<td><code>Integer64</code></td>
<td><code>int</code>, <code>str</code></td>
<td><code>[0]|[-+]?[1-9][0-9]*</code></td>
</tr>
<tr>
<td>string</td>
<td><code>String</code></td>
<td><code>str</code></td>
<td></td>
</tr>
<tr>
<td>decimal</td>
<td><code>Decimal</code></td>
<td><code>float</code>, <code>str</code></td>
<td><code>-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?[0-9]+)?</code></td>
</tr>
<tr>
<td>uri</td>
<td><code>Uri</code></td>
<td><code>str</code></td>
<td><code>\S*</code></td>
</tr>
<tr>
<td>url</td>
<td><code>Url</code></td>
<td><code>str</code></td>
<td></td>
</tr>
<tr>
<td>canonical</td>
<td><code>Canonical</code></td>
<td><code>str</code></td>
<td></td>
</tr>
<tr>
<td>base64Binary</td>
<td><code>Base64Binary</code></td>
<td><code>str</code></td>
<td><code>(\s*([0-9a-zA-Z\+\=]){4}\s*)+</code></td>
</tr>
<tr>
<td>instant</td>
<td><code>Instant</code></td>
<td><code>str</code></td>
<td><code>([0-9]([0-9]([0-9][1-9]|[1-9]0)|[1-9]00)|[1-9]000)-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])T([01][0-9]|2[0-3]):[0-5][0-9]:([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?</code></td>
</tr>
<tr>
<td>date</td>
<td><code>Date</code></td>
<td><code>str</code></td>
<td><code>([0-9]([0-9]([0-9][1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2][0-9]|3[0-1]))?)?</code></td>
</tr>
<tr>
<td>time</td>
<td><code>Time</code></td>
<td><code>str</code></td>
<td><code>([01][0-9]|2[0-3])(:[0-5][0-9](:([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)?)?</code></td>
</tr>
<tr>
<td>datetime</td>
<td><code>DateTime</code></td>
<td><code>str</code></td>
<td><code>([0-9]([0-9]([0-9][1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2][0-9]|3[0-1]))?)?(T([01][0-9]|2[0-3])(:[0-5][0-9](:([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)?)?)?</code></td>
</tr>
<tr>
<td>code</td>
<td><code>Code</code></td>
<td><code>str</code></td>
<td><code>[^\s]+(\s[^\s]+)*</code></td>
</tr>
<tr>
<td>oid</td>
<td><code>Oid</code></td>
<td><code>str</code></td>
<td><code>urn:oid:[0-2](\.(0|[1-9][0-9]*))+</code></td>
</tr>
<tr>
<td>id</td>
<td><code>Id</code></td>
<td><code>str</code></td>
<td><code>[A-Za-z0-9\-\.]{1,64}</code></td>
</tr>
<tr>
<td>markdown</td>
<td><code>Markdown</code></td>
<td><code>str</code></td>
<td><code>\s*(\S|\s)*</code></td>
</tr>
<tr>
<td>unsignedInt</td>
<td><code>UnsignedInt</code></td>
<td><code>int</code>,<code>str</code></td>
<td><code>[0]|([1-9][0-9]*)</code></td>
</tr>
<tr>
<td>positiveInt</td>
<td><code>PositiveInt</code></td>
<td><code>int</code>,<code>str</code></td>
<td><code>\+?[1-9][0-9]*</code></td>
</tr>
<tr>
<td>uuid</td>
<td><code>Uuid</code></td>
<td><code>str</code></td>
<td>``</td>
</tr>
</tbody>
</table>
<h4 id="complex-types">Complex Types</h4>
<p>Complex types, are composed of multiple elements, each of which can be either primitive or other complex types. They are used to represent more sophisticated data structures. In Fhircraft all <a href="https://hl7.org/fhir/datatypes.html#complex">FHIR complex types</a> are represented as built-in Pydantic models, which are auto-generated from their respective FHIR structure definitions. Each complex type includes all fields specified in the release-specific FHIR definitions and incorporates validators to enforce FHIR constraints.</p>
<p>To import a complex type for a specific FHIR release, use the <code>get_complex_FHIR_type</code> utility function. For example, to import the <code>CodeableConcept</code> complex type from the FHIR R4B release:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.resources.datatypes</span> <span class="kn">import</span> <span class="n">get_complex_FHIR_type</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">CodeableConcept</span> <span class="o">=</span> <span class="n">get_complex_FHIR_type</span><span class="p">(</span><span class="s1">&#39;CodeableConcept&#39;</span><span class="p">,</span> <span class="n">release</span><span class="o">=</span><span class="s1">&#39;R4B&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>For a comprehensive list of Fhircraft's complex data types and additional details, please refer to the Fhircraft FHIR-release-specific documentation:</p>
<ul>
<li><a href="/docs/reference/fhircraft/fhir/resources/datatypes/R4/complex_types/">FHIR Release R4 complex types</a></li>
<li><a href="/docs/reference/fhircraft/fhir/resources/datatypes/R4B/complex_types/">FHIR Release R4B complex types</a></li>
<li><a href="/docs/reference/fhircraft/fhir/resources/datatypes/R5/complex_types/">FHIR Release R5 complex types</a></li>
</ul>
<h3 id="fhir-resources">FHIR resources</h3>
<p>Each FHIR resource (be it a core resource, complex type, or profiled resource) is represented as a Pydantic <code>FHIRBaseModel</code> with the following structure:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">class</span> <span class="err">&lt;</span><span class="nc">ResourceName</span><span class="o">&gt;</span><span class="p">(</span><span class="n">FHIRBaseModel</span><span class="p">):</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="o">&lt;</span><span class="n">FhirElementName</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">FhirType</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">&lt;</span><span class="n">defaultValue</span><span class="o">&gt;</span><span class="p">)</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="k">def</span> <span class="o">&lt;</span><span class="n">validationName</span><span class="o">&gt;</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        <span class="o">&lt;</span><span class="n">FhirValidationFcn</span><span class="o">&gt;</span>
</span></code></pre></div>
<p>For example, for a fictional simplified FHIR resource <code>mycustomresource.json</code></p>
<div class="language-json highlight"><span class="filename">mycustomresource.json</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">&quot;resourceType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StructureDefinition&quot;</span><span class="p">,</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;myresource&quot;</span><span class="p">,</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://example.org/fhir/StructureDefinition/mycustomresource&quot;</span><span class="p">,</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyResource&quot;</span><span class="p">,</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;draft&quot;</span><span class="p">,</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">  </span><span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;resource&quot;</span><span class="p">,</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">  </span><span class="nt">&quot;abstract&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DomainResource&quot;</span><span class="p">,</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">  </span><span class="nt">&quot;baseDefinition&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/DomainResource&quot;</span><span class="p">,</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">  </span><span class="nt">&quot;derivation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;constraint&quot;</span><span class="p">,</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">  </span><span class="nt">&quot;snapshot&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="nt">&quot;element&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyResource&quot;</span><span class="p">,</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">        </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyResource&quot;</span><span class="p">,</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">        </span><span class="nt">&quot;short&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A custom resource for demonstration&quot;</span><span class="p">,</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="w">        </span><span class="nt">&quot;definition&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A custom resource with a single example element.&quot;</span><span class="p">,</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">        </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">        </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;*&quot;</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyResource.exampleElement&quot;</span><span class="p">,</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">        </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyResource.exampleElement&quot;</span><span class="p">,</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">        </span><span class="nt">&quot;short&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;An example element&quot;</span><span class="p">,</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">        </span><span class="nt">&quot;definition&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;An example element of type string.&quot;</span><span class="p">,</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="w">        </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="w">        </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="w">          </span><span class="p">{</span>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="w">            </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="w">          </span><span class="p">}</span>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="w">        </span><span class="p">]</span>
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="p">}</span>
</span></code></pre></div>
<p>constructing a Pydantic FHIR model via </p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.resources.factory</span> <span class="kn">import</span> <span class="n">construct_resource_model</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.utils</span> <span class="kn">import</span> <span class="n">load_file</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">mycustomresource_model</span> <span class="o">=</span> <span class="n">construct_resource_model</span><span class="p">(</span><span class="n">structure_definition</span><span class="o">=</span><span class="n">load_file</span><span class="p">(</span><span class="s1">&#39;mycustomresource.json&#39;</span><span class="p">))</span>
</span></code></pre></div>
<p>will result in a model that could be manually specified using the following code: </p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.resources.base</span> <span class="kn">import</span> <span class="n">FHIRBaseModel</span> 
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.resources.datatypes.primitives</span> <span class="kn">import</span> <span class="n">String</span> 
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">class</span> <span class="nc">MyResource</span><span class="p">(</span><span class="n">FHIRBaseModel</span><span class="p">):</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">exampleElement</span><span class="p">:</span> <span class="n">String</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;An example element&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="fhir-elements">FHIR elements</h3>
<p>The following section will describe how Fhircraft represents certain aspects of FHIR resource elements. This is purely informative, as Fhircraft automatically accounts for all rules and representation described here when constructing models. </p>
<h4 id="cardinality">Cardinality</h4>
<p>The cardinality of an element determines the field's characteristics in the Pydantic model, such as whether it should be optional, required, or a list. Specifically:
- A minimal cardinality of 0 indicates that the field is optional.
- A maximal cardinality greater than 1 signifies that the field should be represented as a list.</p>
<p>The following table demonstrates how cardinality affects type annotations for an element of type <code>Coding</code>: </p>
<table>
<thead>
<tr>
<th>FHIR type</th>
<th>Min. cardinality</th>
<th>Max. cardinality</th>
<th>Field type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Coding</code></td>
<td><code>1</code></td>
<td><code>1</code></td>
<td><code>Coding</code></td>
</tr>
<tr>
<td><code>Coding</code></td>
<td><code>0</code></td>
<td><code>1</code></td>
<td><code>Optional[Coding]</code></td>
</tr>
<tr>
<td><code>Coding</code></td>
<td><code>1</code></td>
<td><code>*</code></td>
<td><code>List[Coding]</code></td>
</tr>
<tr>
<td><code>Coding</code></td>
<td><code>0</code></td>
<td><code>*</code></td>
<td><code>Optional[List[Coding]]</code></td>
</tr>
</tbody>
</table>
<h4 id="backbone-elements">Backbone elements</h4>
<p>Backbone elements represent reusable groups of elements that can be shared across different resources or used multiple times within a resource to provide hierarchical structure. These elements are modeled using the FHIR complex type <code>BackboneElement</code>. </p>
<p>In Fhircraft, backbone elements are represented as individual Pydantic models. These models include the structure and fields defined by the <code>BackboneElement</code> type. The model is then referenced by the original resource, preserving the hierarchical structure in the Pydantic model.</p>
<p>For example, the <a href="https://www.hl7.org/fhir/observation-definitions.html#Observation.component"><code>Observation.component</code></a> element of the <code>Observation</code> FHIR resource is a <code>BackboneElement</code>. In Fhircraft, this would be represented as follows:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">class</span> <span class="nc">ObservationComponent</span><span class="p">(</span><span class="n">BackboneElement</span><span class="p">):</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    <span class="o">...</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="k">class</span> <span class="nc">Observation</span><span class="p">(</span><span class="n">FHIRBaseModel</span><span class="p">):</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>    <span class="o">...</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    <span class="n">component</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">ObservationComponent</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="slicing">Slicing</h4>
<p>Slicing in FHIR is a mechanism that allows for the differentiation and specialization of repeated elements within a resource. It's used when a single element or field in a resource can have multiple subtypes or variations that need to be distinguished from one another based on certain criteria. Slicing is often applied in profiles and extensions to enforce specific constraints and rules on these repeated elements.</p>
<div class="admonition note slicing">
<p class="admonition-title">Note</p>
<p>Slicing is only applicable to elements that are allowed to repeat.</p>
</div>
<p>Each "slice" represents a distinct subset or variation of the repeated element that meets specific criteria defined by the discriminators. Slices allow the same element to be used in different ways within the same resource. 
Fhircraft represents each slice as an independent model, based on <code>FHIRSliceModel</code>, with its own fields and constraints, and representing the profiled structure of the slice. </p>
<p>The sliced element can accept any value that matches any of the slices or the original element. This is achieved via an ordered <code>Union</code> of the slices and the original element type. </p>
<p>For example, for an <code>Observation.component</code> element in the profile <code>ProfiledObservation</code> that has been sliced into the slices
- <code>'string-component'</code>: An <code>Observation.component</code> where <code>Observation.component.value</code> only accepts <code>str</code>
- <code>'integer-component'</code>: An <code>Observation.component</code> where <code>Observation.component.value</code> only accepts <code>int</code>  <br />
from which Fhircraft will automatically generate the following model structure:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">class</span> <span class="nc">ObservationComponent</span><span class="p">(</span><span class="n">BackboneElement</span><span class="p">):</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="o">...</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="n">valueString</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="n">valueInteger</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="k">class</span> <span class="nc">StringComponent</span><span class="p">(</span><span class="n">FHIRSliceModel</span><span class="p">):</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>    <span class="o">...</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>    <span class="n">valueString</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="k">class</span> <span class="nc">IntegerComponent</span><span class="p">(</span><span class="n">FHIRSliceModel</span><span class="p">):</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>    <span class="o">...</span>    
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    <span class="n">valueInteger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="k">class</span> <span class="nc">ProfiledObservation</span><span class="p">(</span><span class="n">FHIRBaseModel</span><span class="p">):</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>    <span class="o">...</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>    <span class="n">component</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>        <span class="n">Annotated</span><span class="p">[</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>            <span class="n">Union</span><span class="p">[</span><span class="n">StringComponent</span><span class="p">,</span> <span class="n">IntegerComponent</span><span class="p">,</span> <span class="n">ObservationComponent</span><span class="p">],</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>            <span class="n">Field</span><span class="p">(</span><span class="n">union_mode</span><span class="o">=</span><span class="s1">&#39;left_to_right&#39;</span><span class="p">)</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>        <span class="p">]</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>    <span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span></code></pre></div>
<p>Thanks to the use of <code>union_mode='left_to_right'</code>, when a value is assigned to a sliced element (<code>component</code>), the model will first try to instanciate the individual slice models (based on their individual validation criteria) and otherwise use the original model to store the data. For example</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">myobs</span> <span class="o">=</span> <span class="n">ProfiledObservation</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>        <span class="p">{</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>            <span class="o">...</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>            <span class="n">valueInteger</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>        <span class="p">},</span> <span class="p">{</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>            <span class="o">...</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>            <span class="n">valueString</span><span class="o">=</span><span class="s1">&#39;value,</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>        <span class="p">}</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>    <span class="p">],</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>    <span class="o">...</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="p">)</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="nb">type</span><span class="p">(</span><span class="n">myobs</span><span class="o">.</span><span class="n">component</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="c1"># IntegerComponent</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="nb">type</span><span class="p">(</span><span class="n">myobs</span><span class="o">.</span><span class="n">component</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="c1"># StringComponent</span>
</span></code></pre></div>
<p>FHIR profiles can also enforce individual cardinality rules on the slices. Fhircraft accounts for these via model validators that ensure that the correct number of slices of each type are present in the model. </p>
<p>The elements in the model that contain slices can be examined by calling the <code>get_sliced_elements</code> class method on the model.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="o">&gt;&gt;&gt;</span><span class="n">ProfiledObservation</span><span class="o">.</span><span class="n">get_sliced_elements</span><span class="p">()</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="p">{</span><span class="s1">&#39;component&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">StringComponent</span><span class="p">,</span> <span class="n">IntegerComponent</span><span class="p">]}</span>
</span></code></pre></div>
<h4 id="type-choice-elements">Type-choice elements</h4>
<p>In FHIR, choice-type elements are named using the pattern <code>&lt;elementName&gt;[x]</code>, where <code>[x]</code> indicates that the element can be of multiple types. Fhircraft represents each allowed type by creating a separate field, replacing <code>[x]</code> with the specific type name. 
For example, a FHIR element <code>value[x]</code> that allows either <code>str</code> or <code>int</code> values would be represented by two Pydantic fields:  <code>valueString</code> and <code>valueInteger</code>.</p>
<p>Only one type can be chosen at a time for a choice-type element, meaning that you cannot assign multiple types to the same element in a single instance of a resource. Fhircraft enforces this constraint through validation, ensuring that only one of the fields representing the different types has a value.</p>
<p>For example, the <a href="https://build.fhir.org/observation-definitions.html#Observation.effective_x_"><code>Observation.effective[x]</code></a> element of the <code>Observation</code> FHIR resource is a type choice value that accepts a value of the one of the types <code>Date</code>, <code>DateTime</code>, <code>Instant</code>, or <code>Timing</code>. In Fhircraft, this would be represented as follows:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">class</span> <span class="nc">Observation</span><span class="p">(</span><span class="n">FHIRBaseModel</span><span class="p">):</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>    <span class="o">...</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    <span class="n">effectiveDateTime</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DateTime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="n">effectiveDate</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Date</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="n">effectiveInstant</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Instant</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span class="n">effectiveTiming</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Timing</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>   <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="k">def</span> <span class="nf">effective_type_choice_validator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>        <span class="o">...</span>
</span></code></pre></div>
<p>Additionally, if the chosen type for an instance is not known, you can access the value via a property  <code>&lt;elementName&gt;</code> (without the <code>[x]</code>) that returns the value of the type that has been set.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">obs</span> <span class="o">=</span> <span class="n">Observation</span><span class="p">(</span><span class="n">effectiveDate</span><span class="o">=</span><span class="s1">&#39;01/01/2000&#39;</span><span class="p">)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">obs</span><span class="o">.</span><span class="n">effective</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="s1">&#39;01/01/2000&#39;</span>
</span></code></pre></div>
<h4 id="primitive-extensions">Primitive extensions</h4>
<p>FHIR allows for extensions and IDs to be added even to primitive data types to enable the representation of additional information or to capture data that isn't part of the core specification.</p>
<p>When a primitive data type in FHIR has an extension (or ID), these are not applied directly to the primitive value itself. Instead, the primitive type is wrapped in a structure that allows for the inclusion of both the original value and any associated extensions or IDs. </p>
<p>To account for this extensibility of primitive values, for each primitive-type field <code>&lt;fieldName&gt;</code> in a model , Fhircraft creates an additional field <code>&lt;fieldName&gt;_ext</code> of type <code>Element</code> that containts the <code>id</code> and <code>extension</code> fields for that primitive value. </p>
<p>For example, for the <code>Observation.status</code> field of the <code>Observation</code> resource, Fhircraft generates a model that can be represented as
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">class</span> <span class="nc">Observation</span><span class="p">(</span><span class="n">FHIRBaseModel</span><span class="p">):</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>    <span class="o">...</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>    <span class="n">status</span><span class="p">:</span> <span class="n">Code</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    <span class="n">status_ext</span><span class="p">:</span> <span class="n">Element</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span></code></pre></div>
where any extensions for <code>status</code> can be added to <code>status_ext.extension</code>. </p>
<h4 id="invariant-constraints">Invariant constraints</h4>
<p>Invariant constraints are logical expressions that specify conditions that must be met for the data to be considered valid. These constraints often involve relationships between different elements within a resource and are crucial for maintaining the integrity of FHIR data, ensuring that resources adhere to expected standards.</p>
<p>In Fhircraft, invariant constraints are typically expressed using FHIRPath, a specialized expression language for querying and validating FHIR data. Fhircraft processes these constraints into Pydantic field or model validators that leverage its built-in FHIRPath engine to perform the necessary validation.</p>
<p>If a resource violates an invariant constraint, the Fhircraft model will raise a <a href="https://docs.pydantic.dev/latest/api/pydantic_core/#pydantic_core.ValidationError"><code>ValidationError</code></a>, indicating that the resource does not conform to the FHIR specification. The <a href="https://docs.pydantic.dev/latest/api/pydantic_core/#pydantic_core.ValidationError"><code>ValidationError</code></a> will reference invariant's identifier as well as the evaluated FHIRPath expression, for reference.</p>
<p>For example, if a <code>Quantity</code> resource is specified with unit <code>code</code> but without its coding <code>system</code>, the invariant <code>[qty-3]</code> will violated and the validation fails:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">from</span> <span class="nn">fhircraft.fhir.resources.datatypes.R5.complex_types</span> <span class="kn">import</span> <span class="n">Quantity</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">weight</span> <span class="o">=</span> <span class="n">Quantity</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;miligrams&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;mg&#39;</span><span class="p">)</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="c1"># ValidationError: 1 validation error for Quantity</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1">#    If a code for the unit is present, the system SHALL also be present. </span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="c1">#    [qty-3] -&gt; &quot;code.empty() or system.exists()&quot;</span>
</span></code></pre></div>
<h4 id="fixed-values-pattern-constraints">Fixed values &amp; Pattern constraints</h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Under construction, TBA</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.path"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>